<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Профиль — WB Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
</head>
<body>
  {% include '_navbar.html' %}
  <div class="container mt-3">
    <h1 class="mb-4" style="font-size:1.6rem;">Профиль</h1>

    {% if message %}
      <div class="alert alert-info">{{ message }}</div>
    {% endif %}

    <div class="row g-3">
      <div class="col-md-6">
        <div class="card h-100"><div class="card-body">
          <h6 class="mb-3">API токен Wildberries</h6>
          <form method="post" action="/profile/token" class="row g-3">
            <div class="col-12">
              <input name="token" type="password" class="form-control" value="{{ token }}" placeholder="Вставьте ваш WB токен" />
            </div>
            <div class="col-12 d-flex gap-2">
              <button class="btn btn-primary" type="submit">Сохранить</button>
              <button class="btn btn-outline-danger" type="submit" onclick="document.querySelector('[name=token]').value='';">Очистить</button>
            </div>
          </form>
        </div></div>
      </div>

      <div class="col-md-6">
        <div class="card h-100"><div class="card-body">
          <h6 class="mb-3">Смена пароля</h6>
          <form method="post" action="/profile/password" class="row g-3">
            <div class="col-12">
              <input name="old_password" type="password" class="form-control" placeholder="Текущий пароль" required />
            </div>
            <div class="col-12">
              <input name="new_password" type="password" class="form-control" placeholder="Новый пароль" required />
            </div>
            <div class="col-12 d-grid">
              <button class="btn btn-secondary" type="submit">Обновить пароль</button>
            </div>
          </form>
        </div></div>
      </div>
    </div>

    <div class="card mt-4"><div class="card-body">
      <h6 class="mb-2">Срок действия учётной записи</h6>
      <div>Действует с: <strong>{{ valid_from or '-' }}</strong></div>
      <div>Действует по: <strong>{{ valid_to or '-' }}</strong></div>
      {% if validity_status %}
        <div class="mt-2"><span class="badge bg-{{ 'success' if validity_status=='active' else 'danger' }}">{{ 'Активна' if validity_status=='active' else 'Неактивна' }}</span></div>
      {% endif %}
    </div></div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> 